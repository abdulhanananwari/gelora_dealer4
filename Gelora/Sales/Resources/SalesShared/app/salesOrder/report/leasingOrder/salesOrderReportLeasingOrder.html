<div class="row">
    <div class="col-sm-12">
        <h4>Laporan Penjualan</h4>
        <hr>
        <div class="well">
            <div class="row">
                <div class="col-sm-6">
                    <label>Dari Tanggal</label>
                    <input type="text" ng-model="ctrl.filter.from" class="date">
                </div>
                <div class="col-sm-6">
                    <label>Sampai Tanggal</label>
                    <input type="text" ng-model="ctrl.filter.until" class="date">
                </div>
            </div>
            <leasing-selector selected-main-leasing="mainLeasing" selected-sub-leasing="subLeasing" force-sub-leasing="true" on-leasing-selected="ctrl.filter.main_leasing_id=mainLeasing.id;ctrl.filter.sub_leasing_id=subLeasing.id;"></leasing-selector>
            <button class="btn btn-primary btn-block" ng-click="ctrl.load(ctrl.filter)">Download</button>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Leasing</th>
                        <th>No Mesin</th>
                        <th>Nama Pemohon</th>
                        <th>Nama STNK</th>
                        <th>Type Motor</th>
                        <th>Pokok Hutang Leasing</th>
                        <th>Tanggal Tagihan</th>
                        <th>Tanggal Pencairan</th>
                        <th>JP</th>
                        <th>Jumlah Tagihan</th>
                        <th>Jumlah Pencairan</th>
                        <th>Tanggal Cair</th>
                    </tr>
                </thead>
                <tbody ng-repeat="salesOrder in ctrl.salesOrders">
                    <tr class="text-danger">
                        <td>
                            <span>{{salesOrder.leasingOrder.mainLeasing.name}}</span><br>
                            <span>{{salesOrder.leasingOrder.subLeasing.name}}</span><br>
                        </td>
                        <td>{{salesOrder.delivery.unit.engine_number}}</td>
                        <td>{{salesOrder.customer.name}}</td>
                        <td>{{salesOrder.registration.name}}</td>
                        <td>{{salesOrder.delivery.unit.type_name}}</td>
                        <td>{{salesOrder.leasingOrder.leasing_payable | number }}</td>
                        <td>{{salesOrder.leasingOrder.invoice_generated_at | fromDateTimeString }}</td>
                        <td>{{salesOrder.leasingOrder.payment_at | fromDateTimeString }}</td>
                        <td colspan="4"></td>
                    </tr>
                    <tr  ng-repeat="joinPromo in salesOrder.leasingOrder.joinPromos">
                        <td colspan="8"></td>
                        <td>{{ joinPromo.name }}</td>
                        <td>{{ joinPromo.transfer_amount | number  }}</td>
                        <td>{{ joinPromo.transaction.amount | number }}</td>
                        <td>{{ joinPromo.transaction.created_at | fromDateTimeString }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>