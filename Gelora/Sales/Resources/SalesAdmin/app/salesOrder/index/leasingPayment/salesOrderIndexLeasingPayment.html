<div class="row">
    <div class="col-sm-12">
        <h4>Monitoring Pencairan Leasing</h4>
        <div class="row">
            <div class="col-sm-3">
                <button class="btn btn-block btn-warning" ng-click="ctrl.load.notCreated()">SJ Belum Buat Tagihan</button>
                <br class="visible-xs">
            </div>
            <div class="col-sm-3">
                <button class="btn btn-block btn-warning" ng-click="ctrl.load.notSent()">Tagihan Belum Dikirim</button>
                <br class="visible-xs">
            </div>
            <div class="col-sm-3">
                <button class="btn btn-block btn-warning" ng-click="ctrl.load.notPaid()">Tagihan Belum Cair</button>
                <br class="visible-xs">
            </div>
            <div class="col-sm-3">
                <button class="btn btn-block btn-warning" ng-click="ctrl.load.mainReceivablePaid()">Tagihan Sudah Cair</button>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-sm-12">
                <button class="btn btn-sm btn-block btn-default" data-toggle="modal" data-target="#spk-filter-modal">SPK Filter</button>
                <br>
                <button class="btn btn-block btn-danger btn-xs" ng-click="ctrl.filter={}">Reset Filter</button>
            </div>
        </div>
        <hr>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Customer Name</th>
                        <th>Alamat</th>
                        <th>Type Motor</th>
                        <th>Sales</th>
                        <th>Leasing</th>
                        <th>Piutang Leasing</th>
                        <th>Tanggal SJ</th>
                        <th>Tanggal Cetak Tagihan</th>
                        <th>Tanggal Kirim Tagihan Leasing</th>
                        <th>Tanggal Pencairan Leasing</th>
                        <th>Buka</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="salesOrder in ctrl.salesOrders">
                        <td>{{ salesOrder.customer.name }}</td>
                        <td>{{ salesOrder.registration.address}}</td>
                        <td>{{ salesOrder.unit.data.type_name }}</td>
                        <td>{{ salesOrder.salesPersonnel.entity.name }}</td>
                        <td>{{ salesOrder.leasingOrder.mainLeasing.name }}</td>
                        <td>{{ salesOrder.leasingOrder.leasing_payable | number }}</td>
                        <td>{{ salesOrder.delivery.generated_at | fromDateTimeString }}</td>
                        <td>{{ salesOrder.leasingOrder.invoice_generated_at | fromDateTimeString }}</td>
                        <td>{{ salesOrder.leasingOrder.leasingInvoiceBatch.closed_at | fromDateTimeString }}</td>
                        <td>{{ salesOrder.leasingOrder.payment_at | fromDateTimeString }}</td>
                        <td><a class='btn btn-block btn-xs btn-primary' target="_blank" ui-sref="salesOrderShowCredit({id:salesOrder.id})">Buka</a></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <pagination pagination="ctrl.meta.pagination" page="ctrl.filter.page" on-load-page="ctrl.load(ctrl.filter)"></pagination>
    </div>
</div>
<div class="modal fade" id="spk-filter-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><strong>Filter</strong></h4>
            </div>
            <div class="modal-body">
                <sales-order-filter filter="ctrl.filter"></sales-order-filter>
                <button class="btn btn-block btn-info" ng-click="ctrl.load.fromFilter()">Cari</button>
            </div>
        </div>
    </div>
</div>