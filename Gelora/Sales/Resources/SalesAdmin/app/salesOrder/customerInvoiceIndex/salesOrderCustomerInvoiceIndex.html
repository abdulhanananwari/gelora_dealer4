<div class="row">
    <div class="col-sm-12">
        <h4>Penjualan</h4>
        <hr>
        <button class="btn btn-sm btn-block btn-default" data-toggle="modal" data-target="#spk-filter-modal">SPK Filter</button>
        <br>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Customer Name</th>
                        <th>Type Motor</th>
                        <th>Warna Motor</th>
                        <th>Sales</th>
                        <th>Tanggal SPK</th>
                        <th>Pengiriman</th>
                        <th>Tanggal Pembuatan Customer Invoice</th>
                        <th>Delegasi Customer Invoice</th>
                        <th>Jumlah Tagihan</th>
                        <th>Total Terhutang Saat Tagihan</th>
                        <th>Buka</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="salesOrder in ctrl.salesOrders">
                        <td>{{salesOrder.customer.name}}</td>
                        <td>{{salesOrder.vehicle.name}}</td>
                        <td>{{salesOrder.vehicle.variant.name}}</td>
                        <td>{{salesOrder.salesPersonnel.entity.name}}</td>
                        <td>{{salesOrder.created_at | fromDateTimeString}}</td>
                        <td>{{salesOrder.delivery.generated_at | fromDateTimeString }}</td>
                        <td>{{ salesOrder.customerInvoice.created_at | fromDateTimeString }}</td>
                        <td>{{ salesOrder.customerInvoice.delegate.name }}</td>
                        <td>{{ salesOrder.customerInvoice.amount | number}}</td>
                        <td>{{ salesOrder.customerInvoice.total_due | number}}</td>
                        <td><a ui-sref="salesOrderShowFinancial({id:salesOrder.id})">Buka</a></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <pagination pagination="ctrl.meta.pagination" page="ctrl.filter.page" on-load-page="ctrl.load(ctrl.filter)"></pagination>
    </div>
</div>
<div class="modal fade" id="spk-filter-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><strong>Filter</strong></h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <label>Nama Customer</label>
                        <input type="text" ng-model="ctrl.filter.customer_name">
                        <label>Nomor Telepon Customer</label>
                        <input type="text" ng-model="ctrl.filter.customer_phone_number" name="phone_number">
                    </div>
                    <div class="col-sm-6">
                        <label>Nama Delegasi Customer Invoice</label>
                        <input type="text" ng-model="ctrl.filter.customer_invoice_delegate_name">
                        <label>Tanggal Pembuatan Customer Invoice</label>
                        <input type="text" ng-model="ctrl.filter.customer_invoice_created_at">
                    </div>
                </div>
                <hr>
                <sales-order-filter filter="ctrl.filter"></sales-order-filter>
                <button class="btn btn-block btn-info" ng-click="ctrl.load(ctrl.filter, true)">Cari</button>
                <button class="btn btn-block btn-danger" ng-click="ctrl.resetFilter()">Reset Filter</button>
            </div>
        </div>
    </div>
</div>
